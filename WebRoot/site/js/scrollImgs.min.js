/*
 * 导航栏
 * @author : liu_tingting@neusoft.com
 * @box : 滚动列表jQuery对象或者选择器 如：滚动元素为li的外层ul
 * @config : @width : 一次滚动的长度
 * 			 @scroll_time : 滚动时长
 */
!function(t){function i(i,e){this.box=t(i),this.config=t.extend({},e||{}),this.width=this.config.width||this.box.find("li").innerWidth(),this.size=this.config.size||this.box.find("li").length,this.auto=void 0!==this.config.auto&&1==this.config.auto,this.auto_wait_time=this.config.auto_wait_time||3e3,this.scroll_time=void 0!==this.config.scroll_time?this.config.scroll_time>0?this.config.scroll_time:0:1e3,this.cursor=void 0===this.config.cursor||1==this.config.cursor,this.liWidth=this.box.find("li").innerWidth(),this.userAgent=!1,this.busy=!1,this.leftMore=!1,this.rightMore=!1,this.init()}t.extend(i.prototype,{init:function(){this.user_agent(),this.init_scroll()},user_agent:function(){var t=navigator.userAgent.toLowerCase();(!!window.ActiveXObject||"ActiveXObject"in window)&&(safariVersion=t.indexOf("msie")>-1&&t.match(/msie ([\d.]+)/)[1],safariVersion&&safariVersion<=9&&(this.userAgent=!0))},init_scroll:function(){var i=this;if(i.box.css("width",i.liWidth*i.size),i.box.width()>i.width&&t(".toNext").addClass("hasMore"),i.auto){var e=setInterval(function(){i.go_index(1)},i.auto_wait_time);this.cursor&&this.box.hover(function(){clearInterval(e)},function(){e=setInterval(function(){i.go_index(1)},i.auto_wait_time)})}},go_index:function(i){var e=this;if(!e.busy){var o,s=e.box.position().left;if(e.leftMore=!0,e.rightMore=!0,e.userAgent){if(i<0&&s>=0||i>0&&-s+e.box.parent().width()>=e.liWidth*e.size)return;e.busy=!0,i>0?(o=s-e.width,e.box.width()+s-e.width<=e.width&&(o=e.width-e.box.width(),e.rightMore=!1),e.box.animate({left:o},e.scroll_time,function(){e.busy=!1,e.leftMore?t(".toPre").addClass("hasMore"):t(".toPre").removeClass("hasMore"),e.rightMore?t(".toNext").addClass("hasMore"):t(".toNext").removeClass("hasMore")})):(o=s+e.width,-s<=e.width&&(o=0,e.leftMore=!1),e.box.animate({left:o},e.scroll_time,function(){e.busy=!1,e.leftMore?t(".toPre").addClass("hasMore"):t(".toPre").removeClass("hasMore"),e.rightMore?t(".toNext").addClass("hasMore"):t(".toNext").removeClass("hasMore")}))}else{if(i<0&&s>=0||i>0&&-s+e.box.parent().width()>=e.liWidth*e.size)return;e.busy=!0;var r=e.get_style(i);r&&e.box.css(r),setTimeout(function(){e.complete(i)},e.scroll_time)}}},get_style:function(t){var i,e=this.box.position().left;return"end"==t?{transform:"translateX(0)",transition:"transform 0ms"}:(t>0?(i=e-this.width,this.box.width()+e-this.width<=this.width&&(i=this.width-this.box.width(),this.rightMore=!1)):(i=e+this.width,-e<=this.width&&(i=0,this.leftMore=!1)),{transform:"translateX("+i+"px)",transition:"transform "+this.scroll_time+"ms ease-out"})},complete:function(i){this.busy=!1,this.leftMore?t(".toPre").addClass("hasMore"):t(".toPre").removeClass("hasMore"),this.rightMore?t(".toNext").addClass("hasMore"):t(".toNext").removeClass("hasMore")},prev:function(){this.go_index(-1)},next:function(){this.go_index(1)}}),t.scrollImg=function(t,e){var o=new i(t,e);return{leftMore:o.leftMore,rightMore:o.rightMore,prev:function(){o.prev()},next:function(){o.next()}}}}($);